<!DOCTYPE html>
<html>
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>Expense Tracker App -  Make It Interactive | Aura Tutorials</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="canonical" href="https://github.com/rajaraodv/auratutorials-site/tutorials/aura-et-6-make-it-interactive.html">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/auratutorials/mstile-144x144.png">
  <link rel="stylesheet" href="/auratutorials/css/style.css" type="text/css">

  <link href="//fonts.googleapis.com/css?family=Lato:300,700" rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css">
  <link rel="alternative" href="/auratutorials/atom.xml" title="Aura Tutorials" type="application/atom+xml">
  <meta name="description" content="Events add an interactive layer to your app by enabling you to share data between components. When the checkbox is checked or unchecked in the expense list view, you want to fire an event that updates">
<meta property="og:type" content="website">
<meta property="og:title" content="Expense Tracker App -  Make It Interactive">
<meta property="og:url" content="https://github.com/rajaraodv/auratutorials-site/auratutorials/tutorials/aura-et-6-make-it-interactive.html">
<meta property="og:site_name" content="Aura Tutorials">
<meta property="og:description" content="Events add an interactive layer to your app by enabling you to share data between components. When the checkbox is checked or unchecked in the expense list view, you want to fire an event that updates">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Expense Tracker App -  Make It Interactive">
<meta name="twitter:description" content="Events add an interactive layer to your app by enabling you to share data between components. When the checkbox is checked or unchecked in the expense list view, you want to fire an event that updates">
<meta name="twitter:site" content="@rajaraodv">
<meta property="fb:admins" content="100000247608790">

  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-4910098-10', 'github.com/rajaraodv/auratutorials-site');
  ga('send', 'pageview');
</script>

</head>

<body>
  <header id="header">
  <div class="outer">
    <div class="inner">
      <h1 id="logo-wrap">
        <a href="/auratutorials//" id="logo">Aura Tutorials</a>
        <a id="main-nav-toggle"></a>
      </h1>
      <nav id="main-nav">
        <ul id="main-nav-list">
          
            <li class="main-nav-item">
              <a href="/auratutorials/tutorials/" class="main-nav-link">Tutorials</a>
            </li>
          
            <li class="main-nav-item">
              <a href="/auratutorials/tutorials/aura-docs.html" class="main-nav-link">Docs</a>
            </li>
          
            <li class="main-nav-item">
              <a href="/auratutorials/tutorials/aura-cheat-sheet.html" class="main-nav-link">Cheat Sheet</a>
            </li>
          
        </ul>
      </nav>
    </div>
  </div>
</header>
  <article class="page" itemscope itemtype="http://schema.org/Article">
  <header id="page-banner">
    <div class="outer">
      <div id="page-banner-inner" class="inner">
        <h1 id="page-title" itemprop="name">Expense Tracker App -  Make It Interactive</h1>
        <a href="https://github.com/rajaraodv/auratutorials-site/blob/master/source/tutorials/aura-et-6-make-it-interactive.md" title="Improve this doc" id="page-edit-link"></a>
      </div>
    </div>
  </header>
  <div class="outer">
    <div id="mobile-menu-wrap"></div>
    <div class="page-content">
      <div class="toc-wrap">
        <strong class="toc-title">Contents</strong>
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Create_Event"><span class="toc-number">1.</span> <span class="toc-text">Create Event</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Code_Highlights"><span class="toc-number">1.1.</span> <span class="toc-text">Code Highlights</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Send_The_Event"><span class="toc-number">2.</span> <span class="toc-text">Send The Event</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Add_“update”_JS_Action"><span class="toc-number">2.1.</span> <span class="toc-text">Add “update” JS Action</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Code_Highlights-1"><span class="toc-number">2.1.1.</span> <span class="toc-text">Code Highlights</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Receive_The_Event"><span class="toc-number">3.</span> <span class="toc-text">Receive The Event</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Add_Handler"><span class="toc-number">3.1.</span> <span class="toc-text">Add Handler</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Add_Controller"><span class="toc-number">3.2.</span> <span class="toc-text">Add Controller</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Create_Helper"><span class="toc-number">3.3.</span> <span class="toc-text">Create Helper</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Load_on_init"><span class="toc-number">4.</span> <span class="toc-text">Load on init</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Test_The_App"><span class="toc-number">5.</span> <span class="toc-text">Test The App</span></a></li></ol>
      </div>
      <div class="page-entry" itemprop="articleBody">
        <p>Events add an interactive layer to your app by enabling you to share data between components. When the checkbox is checked or unchecked in the expense list view, you want to fire an event that updates both the view and model based on the relevant<br>data.<br>Start by creating the event and its handler before firing it and handling the event in the parent component.</p>
<h1 id="Create_Event">Create Event</h1>
<p>Create <code>updateExpenseItem.evt</code></p>
<ol>
<li>Click <strong>File &gt; New &gt; Aura Event</strong>.</li>
<li>Enter <code>updateExpenseItem</code> in the <strong>New Event</strong> window. This creates a new event, <code>updateExpenseItem.evt</code>.</li>
<li>In <code>updateExpenseItem.evt</code>, enter this code.</li>
</ol>
<figure class="highlight html"><pre><div class="line"><span class="tag">&lt;<span class="title">aura:event</span> <span class="attribute">type</span>=<span class="value">"APPLICATION"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">aura:attribute</span> <span class="attribute">name</span>=<span class="value">"expense"</span> <span class="attribute">type</span>=<span class="value">"Expense__c"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">aura:event</span>&gt;</span></div></pre></figure>

<h2 id="Code_Highlights">Code Highlights</h2>
<ol>
<li>The attribute <code>expense</code> or type <code>Expense__c</code> you’re defining in the event is passed from the firing component to the handlers.</li>
<li>Aura provides <em>component</em> events and application events. An application event is used here, which when fired notifies its handlers. In this case, form.cmp is notified and handles the event.<br><br></li>
</ol>
<h1 id="Send_The_Event">Send The Event</h1>
<p>Make <code>expenseList.cmp</code> send the event. Recall that <strong>expenseList.cmp</strong> contains the checkbox that’s wired up to a client-side controller action, denoted by <strong>change=”{!c.update}”</strong>. You’ll set up the update action next.</p>
<h2 id="Add_“update”_JS_Action">Add “update” JS Action</h2>
<ol>
<li>In the <strong>expenseList</strong> sidebar, click <strong>CONTROLLER</strong>. This creates a new resource, <code>expenseListController.js</code>.</li>
<li>Enter this code.<br><em>Replace namespace with the name of your registered namespace</em></li>
</ol>
<figure class="highlight JavaScript"><pre><div class="line"></div><div class="line">({</div><div class="line">	update: <span class="function"><span class="keyword">function</span><span class="params">(component, evt, helper)</span> </span>{</div><div class="line">		<span class="keyword">var</span> target = evt.getSource ? evt.getSource().getElement() : evt.target;</div><div class="line">		<span class="keyword">var</span> expense = component.get(<span class="string">"v.expense"</span>);</div><div class="line">		expense.reimbursed = target.checked;</div><div class="line">		<span class="keyword">var</span> updateEvent = $A.get(<span class="string">"e.namespace:updateExpenseItem"</span>);</div><div class="line">		updateEvent.setParams(expense).fire();</div><div class="line">	}</div><div class="line">})</div></pre></figure>

<h3 id="Code_Highlights-1">Code Highlights</h3>
<ol>
<li><p>When the checkbox is checked or unchecked, the <strong>update</strong> action runs, setting the <code>expense.reimbursed</code> parameter value to true or false, based on <code>target.checked</code>. </p>
</li>
<li><p><code>var updateEvent = $A.get(&quot;e.namespace:updateExpenseItem&quot;);</code><br>The <strong>updateExpenseItem.evt</strong> event is fired after the <code>expense.reimbursed</code> parameter<br>values are set on the object.</p>
</li>
</ol>
<h1 id="Receive_The_Event">Receive The Event</h1>
<p>Update <code>form.cmp</code> to listen to the event.</p>
<h2 id="Add_Handler">Add Handler</h2>
<p>In <code>form.cmp</code>, add this handler code before the<code>&lt;aura:attribute&gt;</code> tags:<br><code>&lt;aura:handler event=&quot;namespace:updateExpenseItem&quot; action=&quot;{!c.updateEvent}&quot; /&gt;</code></p>
<p>This event handler runs the updateEvent action when the application event you created is fired.</p>
<h2 id="Add_Controller">Add Controller</h2>
<p>Wire up the <code>updateEvent</code> action to handle the fired event. Click on the CONTROLLER, to open <strong>formController.js</strong>, enter this code.</p>
<figure class="highlight javascript"><pre><div class="line">updateEvent : <span class="function"><span class="keyword">function</span><span class="params">(component, event, helper)</span> </span>{</div><div class="line">	helper.updateExpense(component, event.getParams());</div><div class="line">}</div></pre></figure>

<p>This action calls a helper function and passes in event.getParams(), which contains the expense object with its parameters and values: <code>{amount: 10, expname: &quot;Breakfast&quot;, id: &quot;a03D0000003eRgtIAE”, reimbursed:
false}</code>.</p>
<h2 id="Create_Helper">Create Helper</h2>
<p>Create the <strong>updateExpense</strong> helper function in <strong>formHelper.js</strong> with this code.</p>
<figure class="highlight javascript"><pre><div class="line">updateExpense: <span class="function"><span class="keyword">function</span><span class="params">(component, expense)</span> </span>{</div><div class="line">	<span class="keyword">var</span> expenses = component.getValue(<span class="string">"m.expenses"</span>);</div><div class="line">	expenses.each(<span class="function"><span class="keyword">function</span><span class="params">(e, i)</span> </span>{</div><div class="line">		<span class="keyword">if</span> (e.getValue(<span class="string">"id"</span>).getValue() === expense.id) {</div><div class="line">			e.getValue(<span class="string">"reimbursed"</span>).setValue(expense.reimbursed);</div><div class="line">		}</div><div class="line">	});</div><div class="line">	<span class="keyword">var</span> action = component.get(<span class="string">"c.saveExpense"</span>);</div><div class="line">	action.setParams(expense);</div><div class="line">	$A.enqueueAction(action);</div><div class="line">}</div></pre></figure>

<p>Note: <code>e.getValue(&quot;id&quot;)</code> returns the value object, which is a thin wrapper around the actual data. <code>e.getValue(&quot;id&quot;).getValue()</code> returns the actual data in the value object.</p>
<p><br></p>
<h1 id="Load_on_init">Load on init</h1>
<p>We need to make sure expenses are updated when the <code>form.cmp</code> controller is loaded and not just when the event is triggered.</p>
<p>Go back to <strong>form.cmp</strong>‘s JS controller <em>formController.js</em> and add <code>helper.updateExpense(component);</code> to <strong>doInit</strong> function. </p>
<figure class="highlight"><pre><div class="line">doInit: <span class="function"><span class="keyword">function</span><span class="params">(component, event, helper)</span> </span>{</div><div class="line">	<span class="keyword">var</span> expenses = component.getValue(<span class="string">"m.expenses"</span>);</div><div class="line">	<span class="keyword">var</span> allExpenses = component.getAttributes().getRawValue(<span class="string">"allExpenses"</span>);</div><div class="line">	allExpenses.setValue(expenses);</div><div class="line">	helper.updateTotal(component);</div><div class="line">	helper.updateExpense(component);  <span class="comment">// &lt;-- Add this line</span></div><div class="line">}</div></pre></figure>

<h1 id="Test_The_App">Test The App</h1>
<p>The Aura app you just created is currently accessible as a standalone app by accessing<br><code>http://&lt;mySalesforceInstance&gt;/&lt;namespace&gt;/expenseTracker.app</code></p>

      </div>
      <footer id="page-footer">
        <time id="page-footer-updated" datetime="2014-09-02T00:17:21.000Z" itemprop="dateModified">Last updated: Sep 1 2014</time>
        <a href="aura-et-5-save-expense-to-sfdc.html" id="page-footer-prev" title="Save Expense To SFDC">Prev</a><a href="aura-mini-hacks-temp-converter.html" id="page-footer-next" title="Temperature Converter">Next</a>
      </footer>
      
<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

    </div>
    <aside id="sidebar">
  
    <strong class="sidebar-title">Intro to Aura</strong>
    
      <a href="/auratutorials/tutorials/index.html" class="sidebar-link">What is Aura</a>
    
      <a href="/auratutorials/tutorials/aura-setup.html" class="sidebar-link">Setup</a>
    
      <a href="/auratutorials/tutorials/aura-in-org-reference.html" class="sidebar-link">In-Org Reference App</a>
    
  
    <strong class="sidebar-title">Hello World App</strong>
    
      <a href="/auratutorials/tutorials/aura-hello-world-overview.html" class="sidebar-link">Overview</a>
    
      <a href="/auratutorials/tutorials/aura-hello-world-base-app.html" class="sidebar-link">Create The App</a>
    
      <a href="/auratutorials/tutorials/aura-hello-world-creating-a-component.html" class="sidebar-link">Create The Component</a>
    
      <a href="/auratutorials/tutorials/aura-hello-world-embed-in-s1.html" class="sidebar-link">Running In Salesforce1 Mobile</a>
    
  
    <strong class="sidebar-title">Opportunity Select App</strong>
    
      <a href="/auratutorials/tutorials/aura-opp-select-overview.html" class="sidebar-link">Overview</a>
    
      <a href="/auratutorials/tutorials/aura-opp-Connecting-to-SFDC.html" class="sidebar-link">Connecting to SFDC</a>
    
      <a href="/auratutorials/tutorials/aura-opp-events.html" class="sidebar-link">Creating Events</a>
    
      <a href="/auratutorials/tutorials/aura-opp-listening-to-events.html" class="sidebar-link">Handling Events</a>
    
      <a href="/auratutorials/tutorials/aura-opp-styles.html" class="sidebar-link">Adding Styles</a>
    
      <a href="/auratutorials/tutorials/aura-opp-embed-in-s1.html" class="sidebar-link">Running In Salesforce1 Mobile</a>
    
  
    <strong class="sidebar-title">Static Resources App</strong>
    
      <a href="/auratutorials/tutorials/aura-static-resources-overview.html" class="sidebar-link">Overview</a>
    
      <a href="/auratutorials/tutorials/aura-static-resources-load-resources.html" class="sidebar-link">Load Dependent Files</a>
    
      <a href="/auratutorials/tutorials/aura-static-resources-build-the-app.html" class="sidebar-link">Build The App</a>
    
  
    <strong class="sidebar-title">Expense Tracker App</strong>
    
      <a href="/auratutorials/tutorials/aura-et-overview.html" class="sidebar-link">Overview</a>
    
      <a href="/auratutorials/tutorials/aura-et-appmap.html" class="sidebar-link">App Map</a>
    
      <a href="/auratutorials/tutorials/aura-et-expense-object.html" class="sidebar-link">Create An Expense Object</a>
    
      <a href="/auratutorials/tutorials/aura-et-1-create-app.html" class="sidebar-link">Create Expense Tracker App</a>
    
      <a href="/auratutorials/tutorials/aura-et-2-create-user-input-comp.html" class="sidebar-link">Create User Input Component</a>
    
      <a href="/auratutorials/tutorials/aura-et-3-create-apex-expense-model.html" class="sidebar-link">Load Data From Apex Model</a>
    
      <a href="/auratutorials/tutorials/aura-et-4-create-nested-components.html" class="sidebar-link">Create Nested Components</a>
    
      <a href="/auratutorials/tutorials/aura-et-5-save-expense-to-sfdc.html" class="sidebar-link">Save Expense To SFDC</a>
    
      <a href="/auratutorials/tutorials/aura-et-6-make-it-interactive.html" class="sidebar-link current">Make It Interactive</a>
    
  
    <strong class="sidebar-title">Mini Hacks</strong>
    
      <a href="/auratutorials/tutorials/aura-mini-hacks-temp-converter.html" class="sidebar-link">Temperature Converter</a>
    
      <a href="/auratutorials/tutorials/aura-mini-hacks-contacts-context-app.html" class="sidebar-link">Contact Context App</a>
    
  
    <strong class="sidebar-title">Resources</strong>
    
      <a href="/auratutorials/tutorials/aura-docs.html" class="sidebar-link">Docs</a>
    
      <a href="/auratutorials/tutorials/aura-cheet-sheet.html" class="sidebar-link">Cheet Sheet</a>
    
  
</aside>
  </div>
</article>
  <footer id="footer">
  <div class="outer">
    <div class="inner">
      <div id="footer-copyright">
       Built using <a href="http://hexo.io" target="_blank">hexo.io</a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Site <a href="/tutorials/aura-site-credit.html"> credits</a>
      </div>
      <div id="footer-links">
        <a href="https://twitter.com/rajaraodv" id="footer-link-twitter" class="footer-link" target="_blank"><span>Twitter</span></a>
        <a href="https://github.com/rajaraodv/auratutorials-site" id="footer-link-github" class="footer-link" target="_blank"><span>GitHub</span></a>
      </div>
    </div>
  </div>
</footer>
  
<!-- Swiftype -->
<script>
var Swiftype = window.Swiftype || {};
(function() {
  Swiftype.key = 'DDvzs7LQ9kdKssQNQLcv';

  /** DO NOT EDIT BELOW THIS LINE **/
  var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
  script.src = "//s.swiftypecdn.com/embed.js";
  var entry = document.getElementsByTagName('script')[0];
  document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
}());
</script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="/auratutorials/js/retina.min.js" type="text/javascript"></script>

<script src="/auratutorials/js/script.js" type="text/javascript"></script>

<!-- Google+ -->
<script type="text/javascript" src="//apis.google.com/js/plusone.js"></script>
<!-- Twitter -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

</body>
</html>